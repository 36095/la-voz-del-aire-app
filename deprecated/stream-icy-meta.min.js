function getMp3StreamTitle(e){return new Promise((t,n)=>{const s="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.110 Safari/537.36",r=new XMLHttpRequest;r.open("GET",e,!0),r.setRequestHeader("Icy-MetaData","1"),r.setRequestHeader("User-Agent",s),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.HEADERS_RECEIVED){const e=r.getResponseHeader("icy-metaint");e?r.onprogress=function(){const n=parseInt(e,10);if(r.responseText.length>=n){const e=r.responseText.substring(n),s="StreamTitle=",o=e.indexOf(s);if(-1!==o){let n=e.substring(o+s.length);const r=n.indexOf(";");-1!==r?(n=n.substring(1,r-1),t(n)):t("")}else t("")}}:t("")}else r.readyState===XMLHttpRequest.DONE&&200!==r.status&&n(`Request failed with status ${r.status}`)},r.onerror=function(){n("Network error")},r.send()})}function handleRequest(e){e.preventDefault();const t=document.querySelector('input[name="url"]').value;t?getMp3StreamTitle(t).then(e=>{console.log(e)}).catch(e=>{console.error(e)}):console.log("")}document.querySelector("form").addEventListener("submit",handleRequest);